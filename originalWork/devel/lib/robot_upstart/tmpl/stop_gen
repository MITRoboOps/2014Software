#!/usr/bin/env python
import argparse, sys, string, os, stat
p = argparse.ArgumentParser(description="Executable template generated from %s." % '/home/roboops/groovycat/src/robot_upstart-hydro-devel/tmpl/stop')
p.add_argument('outfile', nargs='?', type=argparse.FileType('w'), default=sys.stdout)
for sub in set(['job']):
  p.add_argument('--%s' % sub, type=str, required=True)
args, _ = p.parse_known_args()
t = '#!/bin/bash\n#\n# Author: Mike Purvis <mpurvis@clearpathrobotics.com>\n#         Copyright (c) 2013, Clearpath Robotics, Inc.\n# \n# Redistribution and use in source and binary forms, with or without\n# modification, are permitted provided that the following conditions are met:\n#    * Redistributions of source code must retain the above copyright\n#       notice, this list of conditions and the following disclaimer.\n#    * Redistributions in binary form must reproduce the above copyright\n#       notice, this list of conditions and the following disclaimer in the\n#       documentation and/or other materials provided with the distribution.\n#    * Neither the name of Clearpath Robotics, Inc. nor the\n#       names of its contributors may be used to endorse or promote products\n#       derived from this software without specific prior written permission.\n# \n# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\n# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n# WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n# DISCLAIMED. IN NO EVENT SHALL CLEARPATH ROBOTICS, INC. BE LIABLE FOR ANY\n# DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n# (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n# LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n# ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n# (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n# SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n# \n# Please send comments, questions, or patches to code@clearpathrobotics.com \n\nPID=$(cat /tmp/{job}.pid)\nlogger -p user.info "Attempting to stop {job} (PID $PID)"\nkill $PID\n'
args.outfile.write(t.format(**vars(args)))
if t.startswith("#!/") and not args.outfile.isatty():
  os.chmod(args.outfile.name, stat.S_IRWXU | stat.S_IRWXG | stat.S_IRWXO)
